{% extends 'base.html' %}

{% block title %}
<title>搜索结果（Vent）</title>
{% endblock title %}

{% block main %}
<div class="container">
    <h4>{{ search_text }} 的搜索结果🔍</h4>
    <hr>

    {% for movie in movie_set %}
    <div class="row test item">
        <div class="item_p1">
            <a href="{{ movie.get_absolute_url }}">
                <img class="thumb_img" src="{{ movie.poster }}"
                     alt="{{ movie.name }}">
            </a>
        </div>

        <div class="item_p2">
            <div class="title">
                <a href="{{ movie.get_absolute_url }}" class="title-text">{{ movie.name }}</a>
            </div>
            <div class="rating">
                <span class="rating_nums">{{ movie.rating }}</span>
                <span>({{ movie.comment_set.count }}人评价)</span>
            </div>
            <div class="abstract">
                <li>{{ movie.region }} / {{ movie.genre }} / {{ movie.alternate_name }} / {{ movie.duration }}</li>
                <li>{{ movie.director }} / {{ movie.star }}</li>
            </div>
        </div>
    </div>
    {% empty %}
    <p>没有找到关于 “{{ search_text }}” 的电影，换个搜索词试试吧。</p>
    {% endfor %}

    <!--<div style="text-align: center; padding: 30px;"> &lt;!&ndash; 网页导航 &ndash;&gt;-->
        <!--<span><a href="?search_text={{ search_text }}&start_pos=0"><< 首页</a></span>-->
        <!--{% if previous_page == True %}-->
        <!--<span><a href="?search_text={{ search_text }}&start_pos={{ start_pos|add:'-5' }}"> < 前页</a></span>-->
        <!--{% endif %}-->

        <!--{% if next_page == True %}-->
        <!--<span><a href="?search_text={{ search_text }}&start_pos={{ start_pos|add:'5' }}"> 后页 ></a></span>-->
        <!--{% endif %}-->
    <!--</div>-->

    <!--使用 bootstrap 的分页风格-->
    <ul class="pagination justify-content-center">
        <li class="page-item"><a class="page-link" href="?search_text={{ search_text }}&start_pos=0" id="first_page">首页</a></li>
        {% if previous_page == True %}
        <li class="page-item"><a class="page-link" href="?search_text={{ search_text }}&start_pos={{ start_pos|add:'-5' }}">前页</a></li>
        {% endif %}

        {% if next_page == True %}
        <li class="page-item"><a class="page-link" href="?search_text={{ search_text }}&start_pos={{ start_pos|add:'5' }}">后页</a></li>
        {% endif %}
    </ul>

    <div class="footer">
        <footer>@ 2018 Vent All Rights Reserved</footer>
    </div>
</div>
{% endblock main %}


{% block script %}
<script type="text/javascript">
$(document).ready(function(){

	 var search_text = "{{ search_text }}";
	 if (search_text == "") {
	    $('#first_page').attr("hidden", "true");
	 }


});


</script>
{% endblock script %}